<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="image.jpg">
    <meta name="description" content="Zincaf√© Zweeloo - Filosofische gesprekken over zingeving in Zweeloo. Vijf bijeenkomsten per jaar begeleid door ervaren facilitators.">
    <title>Zincaf√© Zweeloo - Gesprekken die ertoe doen</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --warm-beige: #f5f1e8;
            --deep-brown: #4a3f35;
            --soft-ochre: #c89b5f;
            --sage: #9ca986;
            --text-dark: #2d2a26;
            --text-light: #6b665d;
            --accent-red: #d4756e;
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.08);
            --shadow-lg: 0 8px 32px rgba(0,0,0,0.12);
            --radius-sm: 12px;
            --radius-md: 16px;
            --radius-lg: 24px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', sans-serif;
            line-height: 1.7;
            color: var(--text-dark);
            background: var(--warm-beige);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        h1, h2, h3 {
            font-weight: 500;
            letter-spacing: -0.02em;
            line-height: 1.2;
        }

        h2 {
            font-size: 2rem;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--deep-brown) 0%, #5a4d41 100%);
            color: var(--warm-beige);
            padding: 3rem 2rem 4rem;
            text-align: center;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at top right, rgba(200, 155, 95, 0.1) 0%, transparent 60%);
            pointer-events: none;
        }

        .header-logo {
            max-width: 180px;
            height: auto;
            margin: 0 auto 2rem;
            display: block;
            border-radius: var(--radius-md);
            position: relative;
            z-index: 1;
        }

        header h1 {
            font-size: 2.75rem;
            margin-bottom: 0.75rem;
            font-weight: 600;
            position: relative;
            z-index: 1;
        }

        header p {
            font-size: 1.25rem;
            font-style: italic;
            opacity: 0.85;
            font-weight: 400;
            position: relative;
            z-index: 1;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        /* Next Event Banner - Automatisch bijgewerkt */
        .next-event-banner {
            background: linear-gradient(135deg, var(--accent-red) 0%, #c26660 100%);
            color: white;
            padding: 2rem 2.5rem;
            border-radius: var(--radius-lg);
            margin-bottom: 3rem;
            text-align: center;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .next-event-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at bottom left, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .next-event-banner strong {
            font-size: 1.4rem;
            display: block;
            margin-bottom: 0.5rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 600;
            position: relative;
            z-index: 1;
        }

        .next-event-banner > div {
            position: relative;
            z-index: 1;
        }

        /* Section styling */
        section {
            background: white;
            padding: 3.5rem;
            border-radius: var(--radius-lg);
            margin-bottom: 2.5rem;
            box-shadow: var(--shadow-sm);
            border: 1px solid rgba(0,0,0,0.02);
            transition: box-shadow 0.3s ease;
        }

        section:hover {
            box-shadow: var(--shadow-md);
        }

        section h2 {
            color: var(--deep-brown);
            font-size: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        section p {
            margin-bottom: 1.2rem;
            color: var(--text-light);
            font-size: 1.05rem;
            line-height: 1.8;
        }

        /* Groepen uitleg box */
        .groepen-uitleg {
            background: linear-gradient(135deg, rgba(156, 169, 134, 0.08) 0%, rgba(156, 169, 134, 0.03) 100%);
            border-left: 3px solid var(--sage);
            padding: 1.75rem;
            border-radius: var(--radius-md);
            margin-bottom: 2.5rem;
        }

        .groepen-uitleg h3 {
            color: var(--sage);
            font-size: 1.2rem;
            margin-bottom: 0.75rem;
            font-weight: 600;
        }

        .groepen-uitleg p {
            color: var(--text-dark);
            margin-bottom: 0;
            font-size: 0.95rem;
        }

        /* Bijeenkomsten met automatische status updates */
        .bijeenkomst-card {
            background: white;
            padding: 2.25rem;
            margin-bottom: 2rem;
            border-radius: var(--radius-md);
            border-left: 3px solid var(--soft-ochre);
            box-shadow: var(--shadow-sm);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(0,0,0,0.02);
        }

        .bijeenkomst-card.geweest {
            opacity: 0.7;
            border-left-color: var(--text-light);
        }

        .bijeenkomst-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
            border-left-width: 4px;
        }

        .bijeenkomst-card.geweest:hover {
            transform: translateY(-2px);
        }

        .bijeenkomst-card h3 {
            color: var(--deep-brown);
            font-size: 1.5rem;
            margin-bottom: 0.75rem;
            font-weight: 600;
        }

        .bijeenkomst-card.geweest h3 {
            color: var(--text-light);
        }

        .thema-beschrijving {
            color: var(--text-light);
            font-style: italic;
            margin-bottom: 1.25rem;
            padding-left: 1rem;
            border-left: 2px solid var(--warm-beige);
        }

        .groep-momenten {
            background: rgba(245, 241, 232, 0.5);
            padding: 1.25rem;
            border-radius: var(--radius-sm);
            margin-top: 1.25rem;
            border: 1px solid rgba(0,0,0,0.03);
        }

        .groep-moment {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .groep-moment:last-child {
            border-bottom: none;
        }

        .groep-label {
            font-weight: 600;
            color: var(--deep-brown);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 0.9rem;
            min-width: 70px;
        }

        .moment-datum {
            color: var(--text-dark);
            font-size: 0.95rem;
            flex: 1;
        }

        .moment-status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 600;
            white-space: nowrap;
        }

        .status-vol {
            background: rgba(212, 117, 110, 0.12);
            color: var(--accent-red);
        }

        .status-beschikbaar {
            background: rgba(156, 169, 134, 0.12);
            color: var(--sage);
        }

        .status-binnenkort {
            background: rgba(200, 155, 95, 0.12);
            color: var(--soft-ochre);
        }

        .status-geweest {
            background: rgba(107, 102, 93, 0.12);
            color: var(--text-light);
        }

        /* Aanmeldformulier */
        .aanmeld-form {
            background: linear-gradient(135deg, rgba(245, 241, 232, 0.6) 0%, rgba(245, 241, 232, 0.3) 100%);
            padding: 2.5rem;
            border-radius: var(--radius-md);
            margin-top: 1.5rem;
            border: 1px solid rgba(0,0,0,0.03);
        }

        .aanmeld-form h3 {
            color: var(--deep-brown);
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-group label {
            display: block;
            color: var(--text-dark);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.85rem 1rem;
            border: 1.5px solid rgba(0,0,0,0.08);
            border-radius: var(--radius-sm);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--sage);
            box-shadow: 0 0 0 3px rgba(156, 169, 134, 0.1);
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .btn-submit {
            background: var(--deep-brown);
            color: white;
            padding: 1rem 2.5rem;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 1rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-sm);
        }

        .btn-submit:hover {
            background: var(--soft-ochre);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-submit:active {
            transform: translateY(0);
        }

        /* Facilitators */
        .facilitator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .facilitator {
            text-align: center;
        }

        .facilitator-photo {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 1rem;
            border: 3px solid var(--soft-ochre);
            display: block;
        }

        .facilitator h3 {
            color: var(--deep-brown);
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .facilitator-role {
            color: var(--soft-ochre);
            font-size: 0.9rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin-bottom: 1rem;
        }

        /* FAQ */
        .faq-item {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--warm-beige);
        }

        .faq-question {
            color: var(--deep-brown);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        .faq-answer {
            color: var(--text-light);
            font-size: 0.95rem;
        }

        /* Contact */
        .contact {
            background: linear-gradient(135deg, var(--deep-brown) 0%, #5a4d41 100%);
            color: var(--warm-beige);
            padding: 3rem;
            border-radius: 8px;
            text-align: center;
        }

        .contact h2 {
            color: var(--warm-beige);
        }

        .contact p {
            color: var(--warm-beige);
            opacity: 0.9;
        }

        .contact-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 2rem;
        }

        .btn {
            display: inline-block;
            padding: 1rem 2.25rem;
            background: white;
            color: var(--deep-brown);
            text-decoration: none;
            border-radius: var(--radius-sm);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-sm);
        }

        .btn:hover {
            background: var(--soft-ochre);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        footer {
            background: var(--deep-brown);
            color: var(--warm-beige);
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2rem;
            }

            .container {
                padding: 2rem 1.5rem;
            }

            section {
                padding: 2rem;
            }

            .groep-moment {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
                padding: 0.75rem 0;
            }

            .groep-label {
                min-width: auto;
            }

            .moment-status {
                align-self: flex-start;
            }
        }
    </style>
</head>
<body>
    <header>
        <img src="image.jpg" alt="Zincaf√© Zweeloo Logo" class="header-logo">
        <h1>Zincaf√© Zweeloo</h1>
        <p>Gesprekken die ertoe doen</p>
    </header>

    <div class="container">
        <!-- Next Event Banner - Automatisch bijgewerkt via JavaScript -->
        <div class="next-event-banner" id="nextEventBanner">
            <strong id="nextEventTitle">Laden...</strong>
            <div id="nextEventDetails"></div>
        </div>

        <!-- Intro -->
        <section>
            <h2>Waarom een Zincaf√© in Zweeloo?</h2>
            <p>In een wereld die steeds sneller lijkt te draaien, is het waardevol om stil te staan bij vragen die er echt toe doen. Wat betekent het om 'goed' te leven? Hoe verhoud je je tot anderen, tot de tijd, tot jezelf?</p>
            
            <p>Met dat idee starten we in Zweeloo het Zincaf√© ‚Äî een reeks toegankelijke bijeenkomsten waarin we als dorpsgenoten in gesprek gaan over zingeving in de brede zin van het woord.</p>
            
            <p style="font-style: italic; padding-left: 1.5rem; border-left: 3px solid var(--soft-ochre);">
                "Iedereen denkt wel eens na over wat ertoe doet. Dat hoeft niet groot of ingewikkeld ‚Äî soms helpt het om gewoon met elkaar te praten, met een beetje hulp van filosofen." ‚Äî Sjoerd
            </p>
        </section>

        <!-- Facilitators -->
        <section>
            <h2>De begeleiders</h2>
            <div class="facilitator-grid">
                <div class="facilitator">
                    <img src="sjoerd.jpg" alt="Sjoerd Slagter" class="facilitator-photo">
                    <h3>Sjoerd Slagter</h3>
                    <p class="facilitator-role">Filosoof & Gespreksbegeleider</p>
                    <p>Sjoerd is bioloog en filosoof. Hij doceert aan de Hogeschool voor Toegepaste Filosofie (HTF) en begeleidt al jaren filosofische dialogen.</p>
                </div>
                <div class="facilitator">
                    <img src="nathalie.jpg" alt="Nathalie van Hooff" class="facilitator-photo">
                    <h3>Nathalie van Hooff</h3>
                    <p class="facilitator-role">Trainer & Gespreksbegeleider</p>
                    <p>Nathalie brengt rust en diepgang in gesprekken. Ze cre√´ert een veilige ruimte waarin mensen zich durven uit te spreken.</p>
                </div>
            </div>
        </section>

        <!-- Bijeenkomsten - Met automatische status updates -->
        <section>
            <h2>Vijf bijeenkomsten in de herfst en winter</h2>
            
            <div class="groepen-uitleg">
                <h3>üí° Hoe werken de groepen?</h3>
                <p>We hebben twee parallelle groepen die hetzelfde programma doorlopen. Beide groepen bespreken dezelfde thema's, maar op verschillende data. Zo kan iedereen een moment kiezen dat het beste past.</p>
            </div>

            <!-- Bijeenkomsten worden automatisch bijgewerkt via JavaScript -->
            <div id="bijeenkomstenContainer"></div>
        </section>

        <!-- Aanmeldformulier -->
        <section>
            <h2>Aanmelden voor een bijeenkomst</h2>
            <p style="text-align: center; margin-bottom: 2rem;">
                Wil je meedoen? Vul onderstaand formulier in en we nemen zo snel mogelijk contact met je op.
            </p>
            
            <div class="aanmeld-form">
                <form id="aanmeldForm" action="https://formspree.io/f/mwpakbbq" method="POST">
                    <div class="form-group">
                        <label for="naam">Naam *</label>
                        <input type="text" id="naam" name="naam" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">E-mailadres *</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="telefoon">Telefoonnummer (optioneel)</label>
                        <input type="tel" id="telefoon" name="telefoon">
                    </div>
                    
                    <div class="form-group">
                        <label for="bijeenkomst">Interesse in welke bijeenkomst?</label>
                        <select id="bijeenkomst" name="bijeenkomst" required>
                            <!-- Opties worden automatisch gegenereerd -->
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="opmerking">Eventuele vragen of opmerkingen</label>
                        <textarea id="opmerking" name="opmerking" placeholder="Bijv. iemand meenemen, eerste keer, etc."></textarea>
                    </div>
                    
                    <button type="submit" class="btn-submit">Aanmelding versturen</button>
                    
                    <div id="formStatus" style="margin-top: 1rem; padding: 1rem; border-radius: 6px; display: none;"></div>
                </form>
            </div>
        </section>

        <!-- FAQ -->
        <section>
            <h2>Veelgestelde vragen</h2>
            
            <div class="faq-item">
                <div class="faq-question">Wat is het Zincaf√© Zweeloo precies?</div>
                <div class="faq-answer">
                    Het Zincaf√© is een kleinschalige ontmoetingsplek waar we samen vertragen en de tijd nemen voor vragen die ertoe doen. In een open gesprek onderzoeken we ervaringen en thema's die raken aan de zin van het leven.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Hoe verloopt een bijeenkomst?</div>
                <div class="faq-answer">
                    <strong>19:15</strong> - Inloop met koffie/thee<br>
                    <strong>19:30</strong> - Welkom en korte introductie op het thema<br>
                    <strong>19:45-21:15</strong> - Gesprek in de groep<br>
                    <strong>21:15-21:30</strong> - Afsluiting en napraten<br><br>
                    Je bepaalt zelf hoeveel je wilt inbrengen: luisteren mag net zo goed als spreken.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Moet ik filosofie kennen om mee te doen?</div>
                <div class="faq-answer">
                    Absoluut niet! Het Zincaf√© is juist bedoeld voor iedereen. Je hoeft geen voorkennis te hebben. Nieuwsgierigheid en bereidheid om te luisteren en na te denken is het belangrijkste.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Wat kost deelname?</div>
                <div class="faq-answer">
                    Deelname is gratis. Een vrijwillige bijdrage voor koffie of thee is welkom, maar volledig optioneel.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Kan ik iemand meenemen?</div>
                <div class="faq-answer">
                    Ja, dat kan zeker! Laat het ons wel even weten bij je aanmelding, zodat we rekening kunnen houden met het aantal deelnemers.
                </div>
            </div>
        </section>

        <!-- Contact -->
        <section class="contact">
            <h2>Vragen of contact?</h2>
            <p>We horen graag van je!</p>
            <div class="contact-buttons">
                <a href="mailto:zincafezweeloo@gmail.com" class="btn">‚úâÔ∏è Stuur een e-mail</a>
            </div>
        </section>
    </div>

    <footer>
        <p>Zincaf√© Zweeloo ‚Äî Gesprekken over zingeving in Zweeloo</p>
        <p style="margin-top: 0.5rem; font-size: 0.85rem;">‚úâÔ∏è zincafezweeloo@gmail.com</p>
    </footer>

    <script>
        // DATA: Alle bijeenkomsten gedefinieerd op √©√©n plek
        const bijeenkomsten = [
            {
                nummer: 1,
                titel: "De vrije wil",
                beschrijving: "Bestaat er zoiets als vrije wil? Maak je die zelf of krijg je die aangereikt van familie, opvoeding, cultuur of van iets hogers?",
                momenten: [
                    { groep: 1, datum: "2025-11-27T19:30", status: "vol" },
                    { groep: 2, datum: "2025-12-18T19:30", status: "vol" }
                ]
            },
            {
                nummer: 2,
                titel: "Vrijheid & verantwoordelijkheid",
                beschrijving: "Over keuzes die je leven bepalen. Hoe vrij zijn we werkelijk in onze beslissingen? En wat betekent dat voor verantwoordelijkheid?",
                momenten: [
                    { groep: 1, datum: "2025-12-19T19:30", status: "vol" },
                    { groep: 2, datum: "2026-01-21T19:30", status: "vol" }
                ]
            },
            {
                nummer: 3,
                titel: "Verlangen, dwaallicht of kompas?",
                beschrijving: "Over verlangen als richtingaanwijzer ‚Äî of als dwaalspoor. Wanneer leiden verlangens ons op het goede pad, en wanneer juist niet?",
                momenten: [
                    { groep: 1, datum: "2026-01-23T19:30", status: "vol" },
                    { groep: 2, datum: "2026-02-25T19:30", status: "vol" }
                ]
            },
            {
                nummer: 4,
                titel: "Hoe ver rijkt jouw verantwoordelijkheid?",
                beschrijving: "Over verantwoordelijkheid, grenzen, en wat je wel en niet kunt (of hoeft te) dragen. Waar ligt de grens tussen zorg voor anderen en zorg voor jezelf?",
                momenten: [
                    { groep: 1,  "2026-02-27T19:30", status: "vol" },
                    { groep: 2, datum: null, status: "binnenkort" }
                ]
            },
            {
                nummer: 5,
                titel: "Vergankelijkheid & herinnering",
                beschrijving: "Over het loslaten van wat voorbij is en het koesteren van wat blijft.",
                momenten: [
                    { groep: 1, datum: null, status: "binnenkort" },
                    { groep: 2, datum: null, status: "binnenkort" }
                ]
            }
        ];

        // FUNCTIE: Controleer of een datum in het verleden ligt
        function isDatumGeweest(datumString) {
            if (!datumString) return false;
            const datum = new Date(datumString);
            const nu = new Date();
            return datum < nu;
        }

        // FUNCTIE: Formatteer datum naar leesbare tekst
        function formateerDatum(datumString) {
            if (!datumString) return "Datum volgt";
            
            const datum = new Date(datumString);
            const dagen = ['zondag', 'maandag', 'dinsdag', 'woensdag', 'donderdag', 'vrijdag', 'zaterdag'];
            const maanden = ['januari', 'februari', 'maart', 'april', 'mei', 'juni', 
                           'juli', 'augustus', 'september', 'oktober', 'november', 'december'];
            
            const dag = dagen[datum.getDay()];
            const dagNummer = datum.getDate();
            const maand = maanden[datum.getMonth()];
            const jaar = datum.getFullYear();
            
            return `${dag.charAt(0).toUpperCase() + dag.slice(1)} ${dagNummer} ${maand} ${jaar}, 19:30 uur`;
        }

        // FUNCTIE: Bepaal status van een moment (automatisch 'geweest' als datum verstreken)
        function getStatus(moment) {
            if (isDatumGeweest(moment.datum)) {
                return 'geweest';
            }
            return moment.status;
        }

        // FUNCTIE: Vind de eerstvolgende bijeenkomst
        function vindEerstvolgende() {
            const nu = new Date();
            let eerstvolgende = null;
            let vroegsteDatum = null;

            bijeenkomsten.forEach(bijeenkomst => {
                bijeenkomst.momenten.forEach(moment => {
                    if (moment.datum && !isDatumGeweest(moment.datum)) {
                        const datum = new Date(moment.datum);
                        if (!vroegsteDatum || datum < vroegsteDatum) {
                            vroegsteDatum = datum;
                            eerstvolgende = {
                                titel: bijeenkomst.titel,
                                datum: moment.datum,
                                groep: moment.groep
                            };
                        }
                    }
                });
            });

            return eerstvolgende;
        }

        // FUNCTIE: Update de next event banner
        function updateNextEventBanner() {
            const nextEvent = vindEerstvolgende();
            const titleEl = document.getElementById('nextEventTitle');
            const detailsEl = document.getElementById('nextEventDetails');

            if (nextEvent) {
                titleEl.textContent = `üóìÔ∏è Eerstvolgende bijeenkomst: ${formateerDatum(nextEvent.datum).split(',')[0]}`;
                detailsEl.textContent = `Groep ${nextEvent.groep} over ${nextEvent.titel} ¬∑ 19:30 uur`;
            } else {
                titleEl.textContent = "Alle bijeenkomsten zijn geweest";
                detailsEl.textContent = "Houd deze pagina in de gaten voor nieuwe data!";
            }
        }

        // FUNCTIE: Genereer HTML voor alle bijeenkomsten
        function renderBijeenkomsten() {
            const container = document.getElementById('bijeenkomstenContainer');
            
            bijeenkomsten.forEach(bijeenkomst => {
                // Bepaal of ALLE momenten geweest zijn
                const alleGeweest = bijeenkomst.momenten.every(m => isDatumGeweest(m.datum));
                
                const card = document.createElement('div');
                card.className = `bijeenkomst-card${alleGeweest ? ' geweest' : ''}`;
                
                let momentenHTML = bijeenkomst.momenten.map(moment => {
                    const status = getStatus(moment);
                    const statusLabels = {
                        'vol': 'Vol',
                        'beschikbaar': 'Beschikbaar',
                        'binnenkort': 'Binnenkort',
                        'geweest': 'Geweest'
                    };
                    
                    return `
                        <div class="groep-moment">
                            <span class="groep-label">Groep ${moment.groep}</span>
                            <span class="moment-datum">${formateerDatum(moment.datum)} ¬∑ De Kapschuur, Zweeloo</span>
                            <span class="moment-status status-${status}">${statusLabels[status]}</span>
                        </div>
                    `;
                }).join('');
                
                card.innerHTML = `
                    <h3>${bijeenkomst.nummer}. ${bijeenkomst.titel}</h3>
                    <p class="thema-beschrijving">${bijeenkomst.beschrijving}</p>
                    <div class="groep-momenten">
                        ${momentenHTML}
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        // FUNCTIE: Vul aanmeldformulier opties
        function vulAanmeldOpties() {
            const select = document.getElementById('bijeenkomst');
            select.innerHTML = '<option value="">-- Maak een keuze --</option>';
            
            bijeenkomsten.forEach(bijeenkomst => {
                bijeenkomst.momenten.forEach(moment => {
                    const status = getStatus(moment);
                    if (status !== 'geweest' && status !== 'vol') {
                        const datum = moment.datum ? formateerDatum(moment.datum).split(' ¬∑ ')[0] : 'datum volgt';
                        const option = document.createElement('option');
                        option.value = `groep${moment.groep}-${bijeenkomst.titel.toLowerCase().replace(/\s+/g, '-')}`;
                        option.textContent = `Groep ${moment.groep}: ${bijeenkomst.titel} (${datum})`;
                        select.appendChild(option);
                    }
                });
            });
            
            // Voeg wachtlijst optie toe
            const wachtlijstOption = document.createElement('option');
            wachtlijstOption.value = 'wachtlijst';
            wachtlijstOption.textContent = 'Wachtlijst (als groepen vol zijn)';
            select.appendChild(wachtlijstOption);
        }

        // FUNCTIE: Formulier afhandeling
        function initFormulier() {
            const form = document.getElementById('aanmeldForm');
            const formStatus = document.getElementById('formStatus');
            
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const submitBtn = form.querySelector('.btn-submit');
                submitBtn.disabled = true;
                submitBtn.textContent = 'Bezig met versturen...';
                
                try {
                    const response = await fetch(form.action, {
                        method: 'POST',
                        body: new FormData(form),
                        headers: {
                            'Accept': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        formStatus.style.display = 'block';
                        formStatus.style.background = 'rgba(156, 169, 134, 0.2)';
                        formStatus.style.color = 'var(--sage)';
                        formStatus.textContent = '‚úì Bedankt voor je aanmelding! We nemen zo snel mogelijk contact met je op.';
                        form.reset();
                    } else {
                        throw new Error('Formulier verzending mislukt');
                    }
                } catch (error) {
                    formStatus.style.display = 'block';
                    formStatus.style.background = 'rgba(212, 117, 110, 0.2)';
                    formStatus.style.color = 'var(--accent-red)';
                    formStatus.textContent = '‚úó Er ging iets mis. Probeer het opnieuw of mail naar zincafezweeloo@gmail.com';
                } finally {
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Aanmelding versturen';
                }
            });
        }

        // INITIALISATIE: Alles starten bij laden van pagina
        document.addEventListener('DOMContentLoaded', function() {
            updateNextEventBanner();
            renderBijeenkomsten();
            vulAanmeldOpties();
            initFormulier();
        });
    </script>
</body>
</html>
